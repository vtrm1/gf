<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Salão - Painel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg-body: #f7f1e8;
      --bg-card: #fffaf3;
      --bg-sidebar: #f0e2cf;
      --accent-gold: #d4af37;
      --accent-gold-dark: #b38f1f;
      --text-main: #4b3c2f;
      --text-muted: #8a7a69;
      --border-soft: #e3d3c0;
      --danger: #d9534f;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      background: radial-gradient(circle at top, #fff8ee 0, #f7f1e8 40%, #f3e9dc 100%);
      color: var(--text-main);
      min-height: 100vh;
    }

    h1, h2, h3 {
      font-weight: 600;
      letter-spacing: 0.03em;
    }

    button {
      cursor: pointer;
      border: none;
      border-radius: 999px;
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
      transition: all 0.2s ease;
      background: var(--accent-gold);
      color: white;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    button:hover {
      background: var(--accent-gold-dark);
      transform: translateY(-1px);
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    }

    button.secondary {
      background: transparent;
      color: var(--accent-gold-dark);
      border: 1px solid var(--accent-gold);
      box-shadow: none;
    }

    button.secondary:hover {
      background: rgba(212, 175, 55, 0.08);
    }

    .tag {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.1rem 0.6rem;
      border-radius: 999px;
      font-size: 0.75rem;
      background: rgba(212, 175, 55, 0.1);
      color: var(--accent-gold-dark);
    }

    .app-shell {
      display: flex;
      min-height: 100vh;
    }

    .sidebar {
      width: 250px;
      background: linear-gradient(180deg, #f0e2cf 0%, #e7d5c0 100%);
      border-right: 1px solid var(--border-soft);
      padding: 1.5rem 1rem;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .sidebar-header {
      display: flex;
      align-items: center;
      gap: 0.6rem;
    }

    .logo-circle {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #fff7e0, #d4af37);
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }

    .sidebar-nav {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
      margin-top: 0.5rem;
    }

    .sidebar button.nav {
      width: 100%;
      justify-content: flex-start;
      border-radius: 999px;
      padding: 0.55rem 0.9rem;
      font-size: 0.85rem;
      background: transparent;
      color: var(--text-main);
      box-shadow: none;
      border: 1px solid transparent;
    }

    .sidebar button.nav.active {
      background: rgba(212, 175, 55, 0.18);
      border-color: rgba(212, 175, 55, 0.7);
      color: var(--accent-gold-dark);
    }

    .sidebar button.nav:hover {
      background: rgba(212, 175, 55, 0.12);
    }

    .sidebar-footer {
      margin-top: auto;
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .content {
      flex: 1;
      padding: 1.5rem 1.75rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 0.75rem;
    }

    .topbar h1 {
      font-size: 1.3rem;
    }

    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1rem;
    }

    .card {
      background: var(--bg-card);
      border-radius: 18px;
      padding: 1rem 1.1rem;
      box-shadow: 0 3px 12px rgba(0,0,0,0.06);
      border: 1px solid rgba(255,255,255,0.9);
    }

    .card h3 {
      font-size: 0.9rem;
      margin-bottom: 0.2rem;
      color: var(--text-muted);
    }

    .card .value {
      font-size: 1.3rem;
      font-weight: 600;
      margin-top: 0.1rem;
    }

    .subtext {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 0.2rem;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-top: 0.5rem;
    }

    .pill {
      padding: 0.2rem 0.6rem;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,0.05);
      font-size: 0.75rem;
      background: rgba(255,255,255,0.8);
    }

    .section-title {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 0.5rem;
      margin-bottom: 0.3rem;
    }

    .section-title h2 {
      font-size: 1rem;
    }

    .table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 0.4rem;
      font-size: 0.85rem;
    }

    .table th, .table td {
      text-align: left;
      padding: 0.5rem 0.4rem;
      border-bottom: 1px solid rgba(0,0,0,0.03);
    }

    .table th {
      font-weight: 500;
      color: var(--text-muted);
    }

    .badge {
      display: inline-block;
      padding: 0.15rem 0.5rem;
      border-radius: 999px;
      font-size: 0.7rem;
      background: rgba(0,0,0,0.04);
    }

    .calendar-year {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
      gap: 0.75rem;
      margin-top: 0.5rem;
    }

    .month-card {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 0.7rem 0.8rem;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      cursor: pointer;
      border: 1px solid rgba(255,255,255,0.9);
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .month-card:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 14px rgba(0,0,0,0.08);
    }

    .month-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.2rem;
    }

    .month-name {
      font-size: 0.9rem;
      font-weight: 600;
    }

    .month-stat {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .month-bar {
      width: 100%;
      height: 6px;
      border-radius: 999px;
      background: rgba(0,0,0,0.04);
      overflow: hidden;
      margin-top: 0.3rem;
    }

    .month-bar-fill {
      height: 100%;
      border-radius: 999px;
      background: linear-gradient(90deg, #f7de9e, #d4af37);
      width: 40%;
    }

    .inventory-list {
      margin-top: 0.4rem;
    }

    .inventory-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem 0;
      border-bottom: 1px dashed rgba(0,0,0,0.04);
      font-size: 0.85rem;
    }

    .inventory-item-main {
      display: flex;
      flex-direction: column;
      gap: 0.1rem;
    }

    .inventory-item-meta {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .progress-bar {
      width: 110px;
      height: 6px;
      border-radius: 999px;
      background: rgba(0,0,0,0.05);
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      border-radius: 999px;
      background: linear-gradient(90deg, #f6e3b8, #d4af37);
      width: 70%;
    }

    .badge-low {
      background: rgba(217, 83, 79, 0.08);
      color: var(--danger);
    }

    .kiosk-wrapper {
      max-width: 900px;
      margin: 0 auto;
      padding: 1rem;
    }

    .kiosk-grid {
      display: grid;
      grid-template-columns: 2fr 1.4fr;
      gap: 1rem;
      margin-top: 0.8rem;
    }

    .kiosk-section-title {
      font-size: 1rem;
      margin-bottom: 0.3rem;
    }

    .kiosk-items {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 0.6rem;
    }

    .kiosk-card {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 0.75rem 0.8rem;
      text-align: center;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      border: 1px solid rgba(255,255,255,0.9);
    }

    .kiosk-card h3 {
      font-size: 0.9rem;
      margin-bottom: 0.15rem;
    }

    .kiosk-price {
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 0.35rem;
    }

    .kiosk-cart {
      background: var(--bg-card);
      border-radius: 18px;
      padding: 0.9rem 1rem;
      box-shadow: 0 3px 12px rgba(0,0,0,0.08);
      border: 1px solid rgba(255,255,255,0.9);
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
      max-height: 450px;
    }

    .kiosk-cart-list {
      flex: 1;
      overflow-y: auto;
      margin-top: 0.3rem;
    }

    .kiosk-cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.35rem 0;
      border-bottom: 1px solid rgba(0,0,0,0.03);
      font-size: 0.85rem;
    }

    .kiosk-cart-total {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 0.5rem;
      font-weight: 600;
    }

    .login-screen {
      max-width: 420px;
      margin: 4rem auto;
      background: var(--bg-card);
      border-radius: 22px;
      padding: 1.5rem 1.7rem 1.3rem;
      box-shadow: 0 8px 30px rgba(0,0,0,0.08);
      border: 1px solid rgba(255,255,255,0.95);
    }

    .login-screen h1 {
      font-size: 1.4rem;
      margin-bottom: 0.3rem;
    }

    .login-screen p {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-bottom: 0.8rem;
    }

    .role-buttons {
      display: flex;
      gap: 0.5rem;
      margin-top: 0.6rem;
    }

    .chip {
      display: inline-flex;
      align-items: center;
      padding: 0.3rem 0.7rem;
      border-radius: 999px;
      background: rgba(0,0,0,0.03);
      font-size: 0.75rem;
      margin-top: 0.2rem;
      color: var(--text-muted);
    }

    .hint {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-top: 0.9rem;
    }

    .hidden {
      display: none !important;
    }

    @media (max-width: 900px) {
      .app-shell {
        flex-direction: column;
      }
      .sidebar {
        width: 100%;
        flex-direction: row;
        align-items: center;
        padding: 0.75rem 1rem;
        overflow-x: auto;
      }
      .sidebar-nav {
        flex-direction: row;
        flex: 1;
        margin-top: 0;
      }
      .sidebar-footer {
        display: none;
      }
      .content {
        padding: 1rem;
      }
      .kiosk-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>

<!-- LOGIN / SELEÇÃO DE PAPEL (SIMULAÇÃO) -->
<section id="login-screen" class="login-screen">
  <h1>Salão Glecie • Painel</h1>
  <p>Escolha como deseja acessar o sistema. Depois você pode trocar isso por login real com Firebase.</p>

  <div class="card" style="margin-top:0.6rem;">
    <h3>Acesso principal (dona do espaço)</h3>
    <p class="subtext">Controle total: agenda, estoque, financeiro e comissões.</p>
    <button style="margin-top:0.5rem;" onclick="setRole('ceo')">Entrar como CEO</button>
  </div>

  <div class="card" style="margin-top:0.8rem;">
    <h3>Colaboradora</h3>
    <p class="subtext">Enxerga agenda das duas e apenas as próprias comissões.</p>
    <button style="margin-top:0.5rem;" class="secondary" onclick="setRole('colab')">
      Entrar como colaboradora
    </button>
  </div>

  <div class="card" style="margin-top:0.8rem;">
    <h3>Tablet do cliente (Kiosk)</h3>
    <p class="subtext">Tela fixa para o cliente registrar consumação e o serviço.</p>
    <button style="margin-top:0.5rem;" class="secondary" onclick="setRole('kiosk')">
      Acessar modo tablet
    </button>
    <div class="chip">Ideal para ficar aberto em tela cheia no salão</div>
  </div>

  <p class="hint">
    ⚙️ <strong>Depois</strong>, aqui você troca por autenticação Firebase (email/senha, etc.)
  </p>
</section>

<!-- SHELL PRINCIPAL (CEO / COLAB) -->
<div id="app-shell" class="app-shell hidden">
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="logo-circle"></div>
      <div>
        <div style="font-size:0.9rem;font-weight:600;">Salão Glecie</div>
        <div id="sidebar-role-label" style="font-size:0.75rem;color:var(--text-muted);">
          —
        </div>
      </div>
    </div>

    <div class="sidebar-nav" id="sidebar-nav">
      <!-- Botões injectados via JS conforme papel -->
    </div>

    <div class="sidebar-footer">
      v0.1 • painel personalizado<br>
      Feito para nail designer.
      <div style="margin-top:0.35rem;">
        <button class="secondary" style="padding:0.3rem 0.7rem;font-size:0.7rem;" onclick="backToLogin()">
          Trocar acesso
        </button>
      </div>
    </div>
  </aside>

  <main class="content">
    <header class="topbar">
      <div>
        <h1 id="page-title">Dashboard</h1>
        <div class="tag" id="page-subtitle">Visão geral do salão</div>
      </div>
      <div>
        <button class="secondary" onclick="openKioskFromDashboard()">Abrir modo tablet</button>
      </div>
    </header>

    <!-- Páginas da CEO -->
    <section id="page-ceo-dashboard" class="page-ceo">
      <div class="card-grid">
        <div class="card">
          <h3>Faturamento do mês</h3>
          <div class="value">R$ 12.340</div>
          <div class="subtext">+18% em relação ao mês passado</div>
        </div>
        <div class="card">
          <h3>Comissão colaboradora</h3>
          <div class="value">R$ 3.250</div>
          <div class="subtext">Atualizada até hoje</div>
        </div>
        <div class="card">
          <h3>Consumo vendido</h3>
          <div class="value">R$ 640</div>
          <div class="subtext">Geladeira bem aproveitada</div>
        </div>
        <div class="card">
          <h3>Alertas de estoque</h3>
          <div class="value">3 itens</div>
          <div class="subtext">Esmalte nude, top coat, energético</div>
        </div>
      </div>

      <div class="section-title" style="margin-top:1rem;">
        <h2>Próximos horários</h2>
        <button class="secondary" onclick="navigatePage('ceo', 'agenda')">Abrir agenda</button>
      </div>
      <table class="table">
        <thead>
          <tr>
            <th>Horário</th>
            <th>Cliente</th>
            <th>Profissional</th>
            <th>Serviço</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>14:00</td>
            <td>Maria Souza</td>
            <td>Glecie</td>
            <td>Manutenção fibra</td>
            <td><span class="badge">Confirmado</span></td>
          </tr>
          <tr>
            <td>16:00</td>
            <td>Ana Paula</td>
            <td>Colaboradora</td>
            <td>Alongamento</td>
            <td><span class="badge">Confirmado</span></td>
          </tr>
        </tbody>
      </table>
    </section>

    <section id="page-ceo-agenda" class="page-ceo hidden">
      <div class="section-title">
        <h2>Agenda anual</h2>
        <div class="pill-row">
          <span class="pill">2025</span>
          <span class="pill">CEO + Colab</span>
          <span class="pill">Visão 12 meses</span>
        </div>
      </div>
      <div class="calendar-year" id="year-calendar">
        <!-- Meses preenchidos via JS -->
      </div>

      <div class="section-title" style="margin-top:1rem;">
        <h2>Agenda do mês (resumo)</h2>
        <button class="secondary">Ver mês detalhado</button>
      </div>
      <table class="table">
        <thead>
          <tr>
            <th>Dia</th>
            <th>Atendimentos</th>
            <th>Ocupação</th>
            <th>Profissionais</th>
          </tr>
        </thead>
        <tbody id="agenda-month-summary">
          <!-- Populado via JS mock -->
        </tbody>
      </table>
    </section>

    <section id="page-ceo-inventory" class="page-ceo hidden">
      <div class="section-title">
        <h2>Estoque de esmaltes</h2>
        <button class="secondary">Adicionar esmalte</button>
      </div>

      <div class="inventory-list" id="inventory-polish-list">
        <!-- Itens via JS mock -->
      </div>

      <div class="section-title" style="margin-top:0.9rem;">
        <h2>Estoque da geladeira</h2>
        <button class="secondary">Adicionar item</button>
      </div>
      <div class="inventory-list" id="inventory-fridge-list">
        <!-- Itens via JS mock -->
      </div>
    </section>

    <section id="page-ceo-finance" class="page-ceo hidden">
      <div class="section-title">
        <h2>Resumo financeiro</h2>
        <div class="pill-row">
          <span class="pill">Mês atual</span>
          <span class="pill">Serviços + consumo</span>
        </div>
      </div>

      <div class="card-grid">
        <div class="card">
          <h3>Receita bruta</h3>
          <div class="value">R$ 15.800</div>
          <div class="subtext">Inclui serviços e bebidas</div>
        </div>
        <div class="card">
          <h3>Custos (produtos)</h3>
          <div class="value">R$ 3.100</div>
          <div class="subtext">Baseado no consumo estimado de esmaltes e itens</div>
        </div>
        <div class="card">
          <h3>Lucro estimado</h3>
          <div class="value">R$ 12.700</div>
          <div class="subtext">Antes de outras despesas fixas</div>
        </div>
      </div>

      <div class="section-title" style="margin-top:1rem;">
        <h2>Vendas por tipo</h2>
      </div>
      <table class="table">
        <thead>
          <tr>
            <th>Categoria</th>
            <th>Quantidade</th>
            <th>Valor</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Serviços</td>
            <td>120</td>
            <td>R$ 13.200</td>
          </tr>
          <tr>
            <td>Consumo (geladeira)</td>
            <td>64</td>
            <td>R$ 2.600</td>
          </tr>
        </tbody>
      </table>
    </section>

    <section id="page-ceo-settings" class="page-ceo hidden">
      <div class="section-title">
        <h2>Configurações do salão</h2>
      </div>
      <div class="card">
        <h3>Colaboradora</h3>
        <div class="subtext">Definir comissão e visualizar vínculo.</div>
        <div class="inventory-item" style="border-bottom:none;">
          <div class="inventory-item-main">
            <strong>Colaboradora atual</strong>
            <span class="inventory-item-meta">Comissão: 40% sobre serviços</span>
          </div>
          <button class="secondary" style="font-size:0.75rem;padding:0.3rem 0.6rem;">
            Editar
          </button>
        </div>
      </div>

      <div class="card" style="margin-top:0.8rem;">
        <h3>Tabela de serviços</h3>
        <div class="subtext">Valores utilizados no app.</div>
        <table class="table" style="margin-top:0.4rem;">
          <thead>
            <tr>
              <th>Serviço</th>
              <th>Duração</th>
              <th>Preço</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Manutenção fibra</td>
              <td>1h30</td>
              <td>R$ 120</td>
            </tr>
            <tr>
              <td>Alongamento novo</td>
              <td>2h</td>
              <td>R$ 180</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Páginas da COLABORADORA -->
    <section id="page-colab-dashboard" class="page-colab hidden">
      <div class="card-grid">
        <div class="card">
          <h3>Comissão no mês</h3>
          <div class="value">R$ 3.250</div>
          <div class="subtext">Baseada nos serviços realizados</div>
        </div>
        <div class="card">
          <h3>Atendimentos hoje</h3>
          <div class="value">6</div>
          <div class="subtext">3 manhã • 3 tarde</div>
        </div>
      </div>

      <div class="section-title" style="margin-top:1rem;">
        <h2>Próximos horários</h2>
        <button class="secondary" onclick="navigatePage('colab', 'agenda')">Ver agenda completa</button>
      </div>
      <table class="table">
        <thead>
          <tr>
            <th>Horário</th>
            <th>Cliente</th>
            <th>Serviço</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>14:00</td>
            <td>Maria Souza</td>
            <td>Manutenção</td>
            <td><span class="badge">Confirmado</span></td>
          </tr>
          <tr>
            <td>16:00</td>
            <td>Ana Paula</td>
            <td>Alongamento</td>
            <td><span class="badge">Confirmado</span></td>
          </tr>
        </tbody>
      </table>
    </section>

    <section id="page-colab-agenda" class="page-colab hidden">
      <div class="section-title">
        <h2>Agenda compartilhada</h2>
        <div class="pill-row">
          <span class="pill">Ver CEO + Colab</span>
        </div>
      </div>
      <table class="table">
        <thead>
          <tr>
            <th>Dia</th>
            <th>Profissional</th>
            <th>Horário</th>
            <th>Cliente</th>
            <th>Serviço</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Hoje</td>
            <td>Glecie</td>
            <td>10:00</td>
            <td>Juliana</td>
            <td>Esmaltação</td>
          </tr>
          <tr>
            <td>Hoje</td>
            <td>Colab</td>
            <td>11:30</td>
            <td>Carla</td>
            <td>Manutenção</td>
          </tr>
        </tbody>
      </table>
    </section>

    <section id="page-colab-commission" class="page-colab hidden">
      <div class="section-title">
        <h2>Minhas comissões</h2>
        <div class="pill-row">
          <span class="pill">Mês atual</span>
        </div>
      </div>
      <table class="table">
        <thead>
          <tr>
            <th>Data</th>
            <th>Serviço</th>
            <th>Valor serviço</th>
            <th>Comissão</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>02/12</td>
            <td>Manutenção fibra</td>
            <td>R$ 120</td>
            <td>R$ 48</td>
          </tr>
          <tr>
            <td>03/12</td>
            <td>Alongamento</td>
            <td>R$ 180</td>
            <td>R$ 72</td>
          </tr>
        </tbody>
      </table>
    </section>

  </main>
</div>

<!-- TELA KIOSK (CLIENTE) -->
<section id="kiosk-screen" class="hidden">
  <div class="kiosk-wrapper">
    <div style="display:flex;justify-content:space-between;align-items:center;">
      <div>
        <h1 style="font-size:1.4rem;">Consumo & Serviço</h1>
        <div class="tag" style="margin-top:0.2rem;">Selecione o que você está consumindo agora</div>
      </div>
      <button class="secondary" onclick="backToLogin()">Sair do modo tablet</button>
    </div>

    <div class="kiosk-grid">
      <div>
        <h2 class="kiosk-section-title">Bebidas e consumação</h2>
        <div class="kiosk-items" id="kiosk-drinks">
          <!-- Itens via JS -->
        </div>

        <h2 class="kiosk-section-title" style="margin-top:0.8rem;">Serviço que estou fazendo</h2>
        <div class="kiosk-items" id="kiosk-services">
          <!-- Serviços via JS -->
        </div>
      </div>

      <div class="kiosk-cart">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <h2 style="font-size:1rem;">Seu carrinho</h2>
          <button class="secondary" style="font-size:0.75rem;padding:0.3rem 0.7rem;" onclick="clearCart()">
            Limpar
          </button>
        </div>
        <div class="kiosk-cart-list" id="kiosk-cart-list">
          <!-- itens carrinho -->
        </div>
        <div class="kiosk-cart-total">
          <span>Total estimado</span>
          <span id="kiosk-cart-total">R$ 0,00</span>
        </div>
        <button style="margin-top:0.5rem;width:100%;" onclick="sendOrder()">
          Finalizar e avisar a profissional
        </button>
        <div class="hint">
          Depois você paga normalmente no caixa. Este registro ajuda o salão a controlar estoque e comissão.
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // -----------------------------
  // ESTADO GLOBAL (simples)
  // -----------------------------
  let currentRole = null; // 'ceo' | 'colab' | 'kiosk'
  let currentPageCEO = 'dashboard';
  let currentPageColab = 'dashboard';

  // Mock de dados
  const mockYear = [
    { month: 'Jan', bookings: 90, occupancy: 70 },
    { month: 'Fev', bookings: 80, occupancy: 65 },
    { month: 'Mar', bookings: 110, occupancy: 82 },
    { month: 'Abr', bookings: 95, occupancy: 75 },
    { month: 'Mai', bookings: 105, occupancy: 79 },
    { month: 'Jun', bookings: 88, occupancy: 68 },
    { month: 'Jul', bookings: 120, occupancy: 86 },
    { month: 'Ago', bookings: 115, occupancy: 83 },
    { month: 'Set', bookings: 92, occupancy: 72 },
    { month: 'Out', bookings: 100, occupancy: 77 },
    { month: 'Nov', bookings: 130, occupancy: 88 },
    { month: 'Dez', bookings: 140, occupancy: 92 }
  ];

  const mockAgendaMonth = [
    { day: '01', count: 8, occupancy: '80%', pros: 'CEO + Colab' },
    { day: '02', count: 6, occupancy: '60%', pros: 'CEO' },
    { day: '03', count: 9, occupancy: '90%', pros: 'Colab' },
    { day: '04', count: 7, occupancy: '70%', pros: 'CEO + Colab' }
  ];

  const mockPolish = [
    { name: 'Nude Elegante', brand: 'Marca X', current: 30, total: 50, low: false },
    { name: 'Vermelho Clássico', brand: 'Marca Y', current: 10, total: 50, low: true },
    { name: 'Top Coat Brilho', brand: 'Marca Z', current: 12, total: 30, low: true }
  ];

  const mockFridge = [
    { name: 'Coca lata', stock: 8, price: 7, low: false },
    { name: 'Energético', stock: 3, price: 10, low: true },
    { name: 'Água sem gás', stock: 15, price: 4, low: false }
  ];

  const kioskDrinks = [
    { id: 'coca', name: 'Coca lata', price: 7 },
    { id: 'energetico', name: 'Energético', price: 10 },
    { id: 'cerveja', name: 'Cerveja long neck', price: 12 },
    { id: 'agua', name: 'Água sem gás', price: 4 },
  ];

  const kioskServices = [
    { id: 'manutencao', name: 'Manutenção fibra', price: 120 },
    { id: 'alongamento', name: 'Alongamento novo', price: 180 },
    { id: 'esmalta', name: 'Esmaltação simples', price: 50 },
  ];

  let cart = [];

  // -----------------------------
  // TROCA DE PAPEL / TELAS
  // -----------------------------
  function setRole(role) {
    currentRole = role;

    document.getElementById('login-screen').classList.add('hidden');
    document.getElementById('app-shell').classList.add('hidden');
    document.getElementById('kiosk-screen').classList.add('hidden');

    if (role === 'ceo' || role === 'colab') {
      document.getElementById('app-shell').classList.remove('hidden');
      setupSidebar(role);
      updateRoleLabel(role);
      updateVisiblePage();
    } else if (role === 'kiosk') {
      document.getElementById('kiosk-screen').classList.remove('hidden');
      renderKiosk();
    }
  }

  function backToLogin() {
    currentRole = null;
    document.getElementById('login-screen').classList.remove('hidden');
    document.getElementById('app-shell').classList.add('hidden');
    document.getElementById('kiosk-screen').classList.add('hidden');
  }

  function openKioskFromDashboard() {
    setRole('kiosk');
  }

  function updateRoleLabel(role) {
    const el = document.getElementById('sidebar-role-label');
    if (role === 'ceo') el.textContent = 'Acesso CEO (total)';
    if (role === 'colab') el.textContent = 'Colaboradora (comissão)';
  }

  function setupSidebar(role) {
    const nav = document.getElementById('sidebar-nav');
    nav.innerHTML = '';

    if (role === 'ceo') {
      const items = [
        { id: 'dashboard', label: 'Dashboard' },
        { id: 'agenda', label: 'Agenda' },
        { id: 'inventory', label: 'Estoque' },
        { id: 'finance', label: 'Financeiro' },
        { id: 'settings', label: 'Configurações' },
      ];
      items.forEach(item => {
        const btn = document.createElement('button');
        btn.className = 'nav';
        btn.textContent = item.label;
        btn.dataset.page = item.id;
        btn.onclick = () => navigatePage('ceo', item.id);
        nav.appendChild(btn);
      });
      highlightSidebarActive('ceo', currentPageCEO);
    }

    if (role === 'colab') {
      const items = [
        { id: 'dashboard', label: 'Dashboard' },
        { id: 'agenda', label: 'Agenda' },
        { id: 'commission', label: 'Minhas comissões' },
      ];
      items.forEach(item => {
        const btn = document.createElement('button');
        btn.className = 'nav';
        btn.textContent = item.label;
        btn.dataset.page = item.id;
        btn.onclick = () => navigatePage('colab', item.id);
        nav.appendChild(btn);
      });
      highlightSidebarActive('colab', currentPageColab);
    }
  }

  function highlightSidebarActive(role, pageId) {
    const nav = document.getElementById('sidebar-nav');
    const buttons = nav.querySelectorAll('button.nav');
    buttons.forEach(btn => {
      if (btn.dataset.page === pageId) {
        btn.classList.add('active');
      } else {
        btn.classList.remove('active');
      }
    });

    const titleMapCEO = {
      dashboard: ['Dashboard', 'Visão geral do salão'],
      agenda: ['Agenda', 'Visão anual e mensal'],
      inventory: ['Estoque', 'Esmaltes e geladeira'],
      finance: ['Financeiro', 'Resumo de receitas e custos'],
      settings: ['Configurações', 'Serviços, comissão, etc.']
    };

    const titleMapColab = {
      dashboard: ['Dashboard', 'Resumo do seu dia'],
      agenda: ['Agenda', 'Sua agenda + CEO'],
      commission: ['Minhas comissões', 'Detalhamento por serviço']
    };

    const titleEl = document.getElementById('page-title');
    const subtitleEl = document.getElementById('page-subtitle');

    if (role === 'ceo') {
      const arr = titleMapCEO[pageId] || ['Dashboard', 'Visão geral do salão'];
      titleEl.textContent = arr[0];
      subtitleEl.textContent = arr[1];
    } else if (role === 'colab') {
      const arr = titleMapColab[pageId] || ['Dashboard', 'Resumo do seu dia'];
      titleEl.textContent = arr[0];
      subtitleEl.textContent = arr[1];
    }
  }

  function navigatePage(role, pageId) {
    if (role === 'ceo') currentPageCEO = pageId;
    if (role === 'colab') currentPageColab = pageId;
    updateVisiblePage();
    highlightSidebarActive(role, pageId);
  }

  function updateVisiblePage() {
    const ceoPages = document.querySelectorAll('.page-ceo');
    const colabPages = document.querySelectorAll('.page-colab');

    ceoPages.forEach(p => p.classList.add('hidden'));
    colabPages.forEach(p => p.classList.add('hidden'));

    if (currentRole === 'ceo') {
      const id = `page-ceo-${currentPageCEO}`;
      const el = document.getElementById(id);
      if (el) el.classList.remove('hidden');
      renderCeoContent();
    }

    if (currentRole === 'colab') {
      const id = `page-colab-${currentPageColab}`;
      const el = document.getElementById(id);
      if (el) el.classList.remove('hidden');
    }
  }

  // -----------------------------
  // RENDERIZAÇÃO DE CONTEÚDO CEO
  // -----------------------------
  function renderCeoContent() {
    renderYearCalendar();
    renderAgendaMonthSummary();
    renderInventoryLists();
  }

  function renderYearCalendar() {
    const container = document.getElementById('year-calendar');
    if (!container) return;
    container.innerHTML = '';
    mockYear.forEach(m => {
      const div = document.createElement('div');
      div.className = 'month-card';
      div.innerHTML = `
        <div class="month-header">
          <div class="month-name">${m.month}</div>
          <div class="month-stat">${m.bookings} atend.</div>
        </div>
        <div class="month-bar">
          <div class="month-bar-fill" style="width:${m.occupancy}%;"></div>
        </div>
        <div class="subtext" style="margin-top:0.25rem;">
          Ocupação aproximada: ${m.occupancy}%
        </div>
      `;
      container.appendChild(div);
    });
  }

  function renderAgendaMonthSummary() {
    const tbody = document.getElementById('agenda-month-summary');
    if (!tbody) return;
    tbody.innerHTML = '';
    mockAgendaMonth.forEach(d => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${d.day}</td>
        <td>${d.count}</td>
        <td>${d.occupancy}</td>
        <td>${d.pros}</td>
      `;
      tbody.appendChild(tr);
    });
  }

  function renderInventoryLists() {
    const polishEl = document.getElementById('inventory-polish-list');
    const fridgeEl = document.getElementById('inventory-fridge-list');
    if (polishEl) {
      polishEl.innerHTML = '';
      mockPolish.forEach(p => {
        const pct = Math.round((p.current / p.total) * 100);
        const div = document.createElement('div');
        div.className = 'inventory-item';
        div.innerHTML = `
          <div class="inventory-item-main">
            <strong>${p.name}</strong>
            <span class="inventory-item-meta">${p.brand} • ${p.current} ml de ${p.total} ml</span>
          </div>
          <div style="text-align:right;display:flex;flex-direction:column;gap:0.2rem;align-items:flex-end;">
            <div class="progress-bar">
              <div class="progress-fill" style="width:${pct}%;"></div>
            </div>
            <span class="badge ${p.low ? 'badge-low' : ''}">
              ${p.low ? 'Baixo estoque' : pct + '% restante'}
            </span>
          </div>
        `;
        polishEl.appendChild(div);
      });
    }

    if (fridgeEl) {
      fridgeEl.innerHTML = '';
      mockFridge.forEach(f => {
        const div = document.createElement('div');
        div.className = 'inventory-item';
        div.innerHTML = `
          <div class="inventory-item-main">
            <strong>${f.name}</strong>
            <span class="inventory-item-meta">${f.stock} unidades • Venda R$ ${f.price}</span>
          </div>
          <span class="badge ${f.low ? 'badge-low' : ''}">
            ${f.low ? 'Repor logo' : 'Ok'}
          </span>
        `;
        fridgeEl.appendChild(div);
      });
    }
  }

  // -----------------------------
  // KIOSK (CLIENTE) - CARRINHO
  // -----------------------------
  function renderKiosk() {
    const drinksEl = document.getElementById('kiosk-drinks');
    const servicesEl = document.getElementById('kiosk-services');
    if (drinksEl) {
      drinksEl.innerHTML = '';
      kioskDrinks.forEach(d => {
        const div = document.createElement('div');
        div.className = 'kiosk-card';
        div.innerHTML = `
          <h3>${d.name}</h3>
          <div class="kiosk-price">R$ ${d.price}</div>
          <button onclick="addDrinkToCart('${d.id}')">Adicionar</button>
        `;
        drinksEl.appendChild(div);
      });
    }
    if (servicesEl) {
      servicesEl.innerHTML = '';
      kioskServices.forEach(s => {
        const div = document.createElement('div');
        div.className = 'kiosk-card';
        div.innerHTML = `
          <h3>${s.name}</h3>
          <div class="kiosk-price">R$ ${s.price}</div>
          <button onclick="selectService('${s.id}')">Selecionar</button>
        `;
        servicesEl.appendChild(div);
      });
    }
    renderCart();
  }

  function addDrinkToCart(drinkId) {
    const drink = kioskDrinks.find(d => d.id === drinkId);
    if (!drink) return;
    cart.push({ type: 'drink', id: drink.id, name: drink.name, price: drink.price });
    renderCart();
  }

  function selectService(serviceId) {
    const service = kioskServices.find(s => s.id === serviceId);
    if (!service) return;
    // Remove serviços anteriores do carrinho
    cart = cart.filter(item => item.type !== 'service');
    cart.push({ type: 'service', id: service.id, name: service.name, price: service.price });
    renderCart();
  }

  function removeFromCart(index) {
    cart.splice(index, 1);
    renderCart();
  }

  function clearCart() {
    cart = [];
    renderCart();
  }

  function calcTotalCart() {
    return cart.reduce((sum, item) => sum + item.price, 0);
  }

  function renderCart() {
    const listEl = document.getElementById('kiosk-cart-list');
    const totalEl = document.getElementById('kiosk-cart-total');
    if (!listEl || !totalEl) return;

    listEl.innerHTML = '';
    cart.forEach((item, index) => {
      const div = document.createElement('div');
      div.className = 'kiosk-cart-item';
      const label = item.type === 'drink' ? 'Consumo' : 'Serviço';
      div.innerHTML = `
        <div>
          <strong>${item.name}</strong>
          <div class="subtext" style="margin-top:0.1rem;">${label}</div>
        </div>
        <div style="text-align:right;">
          <div>R$ ${item.price}</div>
          <button class="secondary" style="padding:0.15rem 0.5rem;font-size:0.7rem;margin-top:0.15rem;"
            onclick="removeFromCart(${index})">
            Remover
          </button>
        </div>
      `;
      listEl.appendChild(div);
    });

    totalEl.textContent = 'R$ ' + calcTotalCart().toFixed(2).replace('.', ',');
  }

  function sendOrder() {
    if (cart.length === 0) {
      alert('Adicione pelo menos um item ao carrinho.');
      return;
    }

    // TODO: aqui você envia o cart para o Firestore:
    // - criar documento em "orders" com items, horário, etc.
    // - atualizar estoque (via Cloud Function)
    // Exemplo (pseudo):
    // await addDoc(collection(db, "orders"), { items: cart, createdAt: serverTimestamp(), ... })

    alert('Pedido registrado! A profissional será avisada.');
    clearCart();
  }

  // Inicialização
  // (poderia detectar login real do Firebase aqui)
</script>

</body>
</html>
